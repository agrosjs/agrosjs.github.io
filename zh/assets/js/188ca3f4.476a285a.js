"use strict";(self.webpackChunkagrosjs_github_io=self.webpackChunkagrosjs_github_io||[]).push([[141],{3905:(e,o,t)=>{t.d(o,{Zo:()=>m,kt:()=>d});var n=t(7294);function r(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function a(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?a(Object(t),!0).forEach((function(o){r(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function l(e,o){if(null==e)return{};var t,n,r=function(e,o){if(null==e)return{};var t,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}(e,o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=n.createContext({}),s=function(e){var o=n.useContext(p),t=o;return e&&(t="function"==typeof e?e(o):i(i({},o),e)),t},m=function(e){var o=s(e.components);return n.createElement(p.Provider,{value:o},e.children)},c={inlineCode:"code",wrapper:function(e){var o=e.children;return n.createElement(n.Fragment,{},o)}},u=n.forwardRef((function(e,o){var t=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=s(t),d=r,f=u["".concat(p,".").concat(d)]||u[d]||c[d]||a;return t?n.createElement(f,i(i({ref:o},m),{},{components:t})):n.createElement(f,i({ref:o},m))}));function d(e,o){var t=arguments,r=o&&o.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=u;var l={};for(var p in o)hasOwnProperty.call(o,p)&&(l[p]=o[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=t[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},7706:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=t(7462),r=(t(7294),t(3905));const a={sidebar_position:7},i="Application",l={unversionedId:"overview/application",id:"version-0.x/overview/application",title:"Application",description:"Routes",source:"@site/versioned_docs/version-0.x/overview/application.md",sourceDirName:"overview",slug:"/overview/application",permalink:"/zh/docs/overview/application",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-0.x/overview/application.md",tags:[],version:"0.x",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Interceptors",permalink:"/zh/docs/overview/interceptors"},next:{title:"CLI",permalink:"/zh/docs/category/cli"}},p={},s=[{value:"Routes",id:"routes",level:2},{value:"Platforms",id:"platforms",level:2},{value:"Entry Point",id:"entry-point",level:2}],m={toc:s};function c(e){let{components:o,...t}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,t,{components:o,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"application"},"Application"),(0,r.kt)("h2",{id:"routes"},"Routes"),(0,r.kt)("p",null,"Now we start this section by the following project structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},".\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 modules/\n        \u251c\u2500\u2500 foo/\n        \u2502   \u251c\u2500\u2500 foo.module.ts\n        \u2502   \u251c\u2500\u2500 foo.service.ts\n        \u2502   \u251c\u2500\u2500 foo.component.ts\n        \u2502   \u2514\u2500\u2500 Foo.tsx\n        \u2514\u2500\u2500 bar/\n            \u251c\u2500\u2500 bar.module.ts\n            \u2514\u2500\u2500 bar.service.ts\n")),(0,r.kt)("p",null,"You should add ",(0,r.kt)("inlineCode",{parentName:"p"},"routes")," option to ",(0,r.kt)("inlineCode",{parentName:"p"},"@Module()")," decorator:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/modules/foo/foo.module.ts",title:"src/modules/foo/foo.module.ts"},"import { Module } from '@agros/app';\nimport { FooComponent } from './foo.component';\nimport { FooService } from './foo.service';\n\n@Module({\n    components: [\n        FooComponent,\n    ],\n    providers: [\n        FooService,\n    ],\n    exports: [\n        FooService,\n    ],\n    routes: [\n        // highlight-start\n        {\n            path: 'foo',\n            useComponentClass: FooComponent,\n        },\n        // highlight-end\n    ],\n})\nexport class FooModule {}\n")),(0,r.kt)("p",null,"Agros will parse the route config and get a path of ",(0,r.kt)("inlineCode",{parentName:"p"},"/foo")," who renders ",(0,r.kt)("inlineCode",{parentName:"p"},"Foo.tsx"),"."),(0,r.kt)("p",null,"You can also use a module class to configure the routes by passing ",(0,r.kt)("inlineCode",{parentName:"p"},"useModuleClass")," option. Now the project looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},".\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 modules/\n        \u251c\u2500\u2500 foo/\n        \u2502   \u251c\u2500\u2500 foo.module.ts\n        \u2502   \u251c\u2500\u2500 foo.service.ts\n        \u2502   \u251c\u2500\u2500 foo.component.ts\n        \u2502   \u2514\u2500\u2500 Foo.tsx\n        \u251c\u2500\u2500 bar/\n        \u2502   \u251c\u2500\u2500 bar.module.ts\n        \u2502   \u2514\u2500\u2500 bar.service.ts\n        \u2514\u2500\u2500 baz/\n            \u251c\u2500\u2500 baz.module.ts\n            \u251c\u2500\u2500 baz.service.ts\n            \u251c\u2500\u2500 baz-child.component.ts\n            \u251c\u2500\u2500 BazChild.tsx\n            \u251c\u2500\u2500 baz.component.ts\n            \u2514\u2500\u2500 Baz.tsx\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"baz.module.ts"),"'s definition looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/modules/baz/baz.module.ts",title:"src/modules/baz/baz.module.ts"},"import { Module } from '@agros/app';\nimport { BazComponent } from './baz.component';\nimport { BazChildComponent } from './baz-child.component';\nimport { BazService } from './baz.service';\n\n@Module({\n    components: [\n        BazComponent,\n        BazChildComponent,\n    ],\n    providers: [\n        BazService,\n    ],\n    exports: [\n        BazComponent,\n        BazChildComponent,\n        BazService,\n    ],\n    routes: [\n        {\n            path: 'baz',\n            useComponentClass: BazComponent,\n            // highlight-start\n            children: [\n                {\n                    path: 'child',\n                    useComponentClass: BazChildComponent,\n                },\n            ],\n            // highlight-end\n        },\n    ],\n})\nexport class BazModule {}\n")),(0,r.kt)("p",null,"and the ",(0,r.kt)("inlineCode",{parentName:"p"},"foo.module.ts"),"'s content:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/modules/foo/foo.module.ts",title:"src/modules/foo/foo.module.ts"},"import { Module } from '@agros/app';\nimport { BazModule } from '../baz/baz.module';\nimport { FooComponent } from './foo.component';\nimport { FooService } from './foo.service';\n\n@Module({\n    imports: [\n        BazModule,\n    ],\n    components: [\n        FooComponent,\n    ],\n    providers: [\n        FooService,\n    ],\n    exports: [\n        FooService,\n    ],\n    routes: [\n        {\n            path: 'foo',\n            useComponentClass: FooComponent,\n            children: [\n                {\n                    // highlight-next-line\n                    useModuleClass: BazModule,\n                },\n            ],\n        },\n    ],\n})\nexport class FooModule {}\n")),(0,r.kt)("p",null,"Agros will parse it into ",(0,r.kt)("inlineCode",{parentName:"p"},"/foo"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"/foo/baz")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"/foo/baz/child")," routes."),(0,r.kt)("h2",{id:"platforms"},"Platforms"),(0,r.kt)("p",null,"Agros supports many frameworks. Now we have already supported React.js and Vue.js with SFC officially, and we are still have Svelte and Solid.js in progress. Agros made it by the technology called ",(0,r.kt)("strong",{parentName:"p"},"platform"),". An Agros platform provides the following things:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"component generator: a function that can be invoked by Agros factory to generate framework-specific component with component declaration instance"),(0,r.kt)("li",{parentName:"ul"},"routes creator: a function that can be invoked by Agros factory to generate framework-specific routes config with ",(0,r.kt)("inlineCode",{parentName:"li"},"routes")," option in ",(0,r.kt)("inlineCode",{parentName:"li"},"@Module()")," decorator"),(0,r.kt)("li",{parentName:"ul"},"component decorator transformer: transform ",(0,r.kt)("inlineCode",{parentName:"li"},"file")," option in ",(0,r.kt)("inlineCode",{parentName:"li"},"@Component()")," decorator with import declarations that will be invoked by component generator to generate components")),(0,r.kt)("p",null,"and so on to help Agros factory build and run the application."),(0,r.kt)("p",null,"By default, Agros provides two platforms mentioned above:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://npmjs.org/package/@agros/platform-react"},(0,r.kt)("inlineCode",{parentName:"a"},"@agros/platform-react")),": Official platform for React.js"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://npmjs.org/package/@agros/platform-vue"},(0,r.kt)("inlineCode",{parentName:"a"},"@agros/platform-vue")),": Official platform for Vue.js")),(0,r.kt)("p",null,"To use a platform, for example, use official Vue.js platform, run the following command in the root directory of your Agros project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i @agros/platform-vue -S\n")),(0,r.kt)("p",null,"and add the following code into ",(0,r.kt)("inlineCode",{parentName:"p"},"agros.config.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=agros.config.js",title:"agros.config.js"},"module.exports = {\n    platform: '@agros/platform-vue',\n};\n")),(0,r.kt)("h2",{id:"entry-point"},"Entry Point"),(0,r.kt)("p",null,"By default, Agros uses ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts")," as the entry of an application. Agros build scripts takes an object default exported from this file:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"module"),": the root module class, be used of constructing the whole application dependencies graph"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"container"),": a ",(0,r.kt)("inlineCode",{parentName:"li"},"HTMLElement")," node that indicate where the application should be mounted, the default value is ",(0,r.kt)("inlineCode",{parentName:"li"},"document.getElementById('root')")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RouterComponent"),": a router component by platform")),(0,r.kt)("p",null,"The code below is an example of entry point file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/index.ts",title:"src/index.ts"},"import { HashRouter } from '@agros/platform-react/lib/react-router-dom';\nimport { AppModule } from './app.module';\n\nexport default {\n    module: AppModule,\n    container: document.getElementById('root'),\n    RouterComponent: HashRouter,\n};\n")))}c.isMDXComponent=!0}}]);